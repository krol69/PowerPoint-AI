# Post-Import Checklist

## Overview

After successfully importing the `.msapp` file into Power Apps, you **MUST** complete the following configuration steps before the app will function correctly. This checklist ensures all data connections, placeholders, and settings are properly configured.

**Estimated Time:** 20-30 minutes

---

## Prerequisites

Before starting, ensure you have:
- [ ] **Power Apps license** (Per App, Per User, or Trial)
- [ ] **Dataverse environment** with maker permissions
- [ ] **Admin email address** for notifications
- [ ] **SharePoint site URL** for document uploads (optional)
- [ ] **Security features** catalog data ready

---

## Step 1: Open the Imported App

1. Go to [make.powerapps.com](https://make.powerapps.com)
2. Click **Apps** (left nav)
3. Find **"Cross-Divisional Project Database"** in the list
4. Click the app name → **Edit** (opens Power Apps Studio)

**Expected Result:** App opens in editing mode with all screens visible

---

## Step 2: Create Dataverse Tables

The app requires **5 Dataverse tables**. Follow the detailed schema in `DATAVERSE_SCHEMA.md`.

### Quick Table Creation

1. Open **DATAVERSE_SCHEMA.md** (in this package)
2. For each table (Submissions, Projects, Security Features, Project Security Details, Project Attachments):
   - Go to [make.powerapps.com](https://make.powerapps.com) → **Tables**
   - Click **+ New table** → **Add columns and data**
   - Create columns as specified in the schema
   - Set up lookups/relationships
   - **Save and publish**

3. **CRITICAL:** Note your environment's **publisher prefix** (e.g., `cr_`, `new_`)
4. **CRITICAL:** Write down the **logical table names** generated by Dataverse

**Example:**
- Display Name: `Submissions`
- Logical Name: `cr_submission` ← **You need this**

### Checklist:
- [ ] `Submissions` table created with all columns
- [ ] `Projects` table created with lookup to Submissions
- [ ] `Security Features` table created
- [ ] `Project Security Details` table created with lookups
- [ ] `Project Attachments` table created
- [ ] All relationships configured
- [ ] Logical names recorded

---

## Step 3: Add Data Connections to the App

1. In Power Apps Studio, click **Data** (left sidebar, database icon)
2. Click **+ Add data**
3. Search for **"Dataverse"** → **Microsoft Dataverse**
4. Search for each table by **display name**:
   - **Submissions**
   - **Projects**
   - **Security Features**
   - **Project Security Details**
   - **Project Attachments**
5. Click each table to add it

6. **Also add:**
   - **Office 365 Outlook** (for email notifications)

**Expected Result:** All tables appear in the Data pane with green checkmarks

### Checklist:
- [ ] Submissions table connected
- [ ] Projects table connected
- [ ] Security Features table connected
- [ ] Project Security Details table connected
- [ ] Project Attachments table connected
- [ ] Office 365 Outlook connector added

---

## Step 4: Update Table References in PowerFx Code

If your environment uses a different publisher prefix or table name, you **MUST** update the PowerFx formulas.

### Find Your Logical Table Names

1. In the **Data** pane, hover over each table
2. Note the **logical name** (e.g., `cr_submission` vs. `new_submission`)

### Update Formula References

**If your table names match the default** (e.g., `Submissions`, `Projects`):
- ✅ **No changes needed** (Power Apps uses display names in most cases)

**If your table names have a custom prefix:**
- Open `App.fx.yaml` (Tree View → **App** → **OnStart**)
- Find-Replace:
  - `Submissions` → `your_prefix_submissions`
  - `Projects` → `your_prefix_projects`
  - `SecurityFeatures` → `your_prefix_securityfeatures`
  - `ProjectSecurityDetails` → `your_prefix_projectsecuritydetails`
  - `ProjectAttachments` → `your_prefix_projectattachments`

**Tip:** Use Power Apps Studio's **Formula Bar** to test formulas:
```powerfx
CountRows(Submissions)  // Should return 0 (or # of records)
```

### Checklist:
- [ ] Table references verified/updated
- [ ] Test formula runs without errors
- [ ] No "table not found" errors

---

## Step 5: Replace Configuration Placeholders

The app uses `<<CHANGE_ME>>` placeholders for environment-specific values. You **MUST** replace these.

### Location: App.fx.yaml → OnStart → gblConfig

1. In Power Apps Studio, click **App** in the Tree View (left)
2. Find the **OnStart** property (in the formula bar)
3. Scroll to the `Set(gblConfig, {...})` section

### Placeholders to Replace:

| Placeholder | Description | Example Value |
|-------------|-------------|---------------|
| `<<CHANGE_ADMIN_EMAIL>>` | Admin email for submission notifications | `admin@yourcompany.com` |
| `<<CHANGE_ADMIN_CC>>` | CC emails (comma-separated, optional) | `manager@yourcompany.com,security@yourcompany.com` |
| `<<CHANGE_SHAREPOINT_FOLDER_URL>>` | SharePoint folder for document uploads | `https://yourcompany.sharepoint.com/sites/ProjectDocs` |

### Example Before:
```powerfx
Set(gblConfig, {
    AdminEmail: "<<CHANGE_ADMIN_EMAIL>>",
    AdminEmailCC: "",
    SharePointFolderURL: "<<CHANGE_SHAREPOINT_FOLDER_URL>>",
    AutosaveInterval: 90000,
    MaxProjects: 5
});
```

### Example After:
```powerfx
Set(gblConfig, {
    AdminEmail: "security.admin@bosch.com",
    AdminEmailCC: "manager@bosch.com",
    SharePointFolderURL: "https://bosch.sharepoint.com/sites/ProjectDB/Documents",
    AutosaveInterval: 90000,
    MaxProjects: 5
});
```

### Checklist:
- [ ] AdminEmail replaced
- [ ] AdminEmailCC set (or left blank)
- [ ] SharePointFolderURL replaced
- [ ] No `<<CHANGE_...>>` placeholders remaining

---

## Step 6: Configure Office 365 Outlook Permissions

The app sends emails via Office 365 Outlook connector.

1. **Test the connection:**
   - In Power Apps Studio, click **Data** → **Office 365 Outlook**
   - Click **...** → **Test connection** → **Allow**

2. **Set permissions:**
   - Go to [make.powerapps.com](https://make.powerapps.com)
   - **Data** → **Connections**
   - Find **Office 365 Outlook**
   - Verify **Status** is "Connected"
   - If not, click **Fix connection** → Sign in

3. **Grant app permissions:**
   - When prompted, click **Accept** to allow:
     - Send emails as you
     - Read your mailbox settings

### Checklist:
- [ ] Office 365 Outlook connection active
- [ ] Permissions granted
- [ ] Test email sent successfully (optional: test via formula bar)

---

## Step 7: Seed Security Features Data

The app needs initial **Security Features** catalog data.

### Option 1: Manual Entry (Quick)

1. Go to [make.powerapps.com](https://make.powerapps.com) → **Tables**
2. Open **Security Features** table
3. Click **+ New row** for each feature:

| Feature Name | Category | Display Order | Is Active |
|--------------|----------|---------------|-----------|
| Secure Boot | Boot Security | 1 | Yes |
| Memory Protection | Memory Safety | 2 | Yes |
| Cryptographic Services | Crypto | 3 | Yes |
| Access Control | Authorization | 4 | Yes |
| Update Security | Lifecycle | 5 | Yes |
| Communication Security | Network | 6 | Yes |
| Intrusion Detection | Monitoring | 7 | Yes |
| Audit Logging | Compliance | 8 | Yes |

4. Click **Save**

### Option 2: Import CSV (Fast for large datasets)

1. Use the provided `SeedData/SecurityFeatures.csv`
2. In Dataverse, open the table → **Import data**
3. Upload the CSV
4. Map columns
5. Import

### Checklist:
- [ ] At least 5-10 security features added
- [ ] IsActive = Yes for all features
- [ ] Display Order set correctly

---

## Step 8: Test Core Functionality

### Test 1: App Launch
1. Click **Play** (▶️) in Power Apps Studio
2. Verify home screen loads without errors
3. Verify user name displays correctly

**Expected:** Home screen shows "Welcome, [Your Name]"

### Test 2: Create New Submission
1. Click **"+ New Submission"**
2. Add a project
3. Fill in Step 1 (Project Basics)
4. Click **Next →**

**Expected:** Navigates to Step 2 without errors

### Test 3: Autosave
1. Wait 90 seconds on the Project List screen
2. Check for "Auto-saved" toast notification

**Expected:** Toast appears, LastSavedOn updates in Dataverse

### Test 4: Security Features
1. Navigate to Wizard Step 4
2. Toggle a security feature ON
3. Fill in Spec Version and Details
4. Verify "missing specs" count updates

**Expected:** Badge shows "✓ Complete" when all fields filled

### Test 5: Submit & Email
1. Complete a full project
2. Go to Submission Review
3. Click **Submit**
4. Check admin email inbox

**Expected:**
- Email received at admin address
- Email contains project details in HTML format
- User receives confirmation email

### Checklist:
- [ ] App launches successfully
- [ ] New submission created
- [ ] Autosave works
- [ ] Security features validation works
- [ ] Email sent successfully

---

## Step 9: Configure App Sharing and Permissions

### Option 1: Share with Individual Users

1. Go to [make.powerapps.com](https://make.powerapps.com) → **Apps**
2. Find your app → **...** → **Share**
3. Enter user emails
4. Select permission level:
   - **User** (can run the app)
   - **Co-owner** (can edit the app)
5. Click **Share**

### Option 2: Share with Security Group (Recommended)

1. In Azure AD, create a security group (e.g., "Project DB Users")
2. Add users to the group
3. Share the app with the group

**Users also need:**
- [ ] **Dataverse access** to the tables (set in Dataverse table security)
- [ ] **Environment access** (Basic User or higher)

### Checklist:
- [ ] App shared with users/groups
- [ ] Dataverse table permissions set
- [ ] Users can launch the app

---

## Step 10: Optional Configurations

### A. Customize Autosave Interval
In `App.fx.yaml` → `gblConfig`:
```powerfx
AutosaveInterval: 90000  // 90 seconds (default)
// Change to 60000 for 60 seconds, or 120000 for 120 seconds
```

### B. Change Maximum Projects Per Submission
```powerfx
MaxProjects: 5  // Default
// Change to 3, 10, etc.
```

### C. Customize Choice Values
Go to **Tables** → **Projects** → **Columns** → Find choice columns:
- **Customer**: Add/remove customer names
- **Microcontroller**: Add/remove MCU options
- **Architecture**: Add/remove architecture types
- **Project Status**: Add/remove status options

### D. Add Company Branding
1. In Power Apps Studio, select the app
2. **Settings** → **Display** → **Icon**
3. Upload your company logo
4. Set **App Name** to match your branding

### Checklist:
- [ ] Autosave interval adjusted (optional)
- [ ] Max projects adjusted (optional)
- [ ] Choice values customized (optional)
- [ ] Company branding added (optional)

---

## Step 11: Publish the App

1. In Power Apps Studio, click **File** → **Save**
2. Click **Publish**
3. Click **Publish this version**
4. Wait for confirmation

**Expected:** App version updated, users see latest changes

### Checklist:
- [ ] App saved
- [ ] App published
- [ ] Version number incremented

---

## Step 12: Final Validation

Run through this complete user flow:

1. **Launch app** → Home screen loads
2. **Create new submission** → Project list appears
3. **Add project** → Wizard Step 1 opens
4. **Fill all 4 wizard steps** → Validation passes
5. **Add security features** → Specs required, missing count updates
6. **Add SharePoint doc link** → Document registered
7. **Review submission** → Metrics correct
8. **Submit** → Status changes, emails sent
9. **View My Submissions** → Submitted entry appears
10. **Clone submission** → New draft created

**All steps passed?** ✅ **App is ready for production**

### Checklist:
- [ ] Complete user flow tested
- [ ] No errors encountered
- [ ] Data saved correctly to Dataverse
- [ ] Emails received
- [ ] Autosave working

---

## Troubleshooting

### Issue: "Table not found" error
**Solution:** Verify table connection in Data pane, check logical names in formulas

### Issue: Email not sending
**Solution:**
- Check Office 365 Outlook connection status
- Verify admin email is valid
- Check user has Send-As permissions
- Test email connector manually

### Issue: Autosave not working
**Solution:**
- Check timer component exists on Project List screen
- Verify `gblConfig.AutosaveInterval` is set correctly
- Check LastSavedOn column exists in Submissions table

### Issue: Security features not appearing
**Solution:**
- Verify Security Features table has data
- Check `IsActive = Yes` for features
- Refresh data source in Power Apps Studio

### Issue: SharePoint link button not working
**Solution:**
- Verify SharePointFolderURL is correct
- Ensure URL doesn't have trailing slash
- Test URL opens manually in browser

---

## Support and Documentation

| Resource | Location |
|----------|----------|
| **Dataverse Schema** | `DATAVERSE_SCHEMA.md` |
| **Theme Customization** | `THEME_DOCUMENTATION.md` |
| **Repack Instructions** | `REPACK_PIPELINE.md` |
| **Root Cause Analysis** | `DIAGNOSIS_AND_ROOT_CAUSE.md` |
| **Validation Report** | `SELF_CHECK_VALIDATION.md` |

---

## Next Steps

After completing this checklist:

1. **Train users** on app functionality
2. **Monitor submissions** in the admin dashboard
3. **Review email notifications** for accuracy
4. **Customize** security features catalog as needed
5. **Backup** the app regularly via Export

---

## Completion Checklist

### Core Setup
- [ ] Dataverse tables created
- [ ] Data connections added
- [ ] Table references verified
- [ ] Placeholders replaced
- [ ] Outlook connector configured
- [ ] Security features seeded

### Testing
- [ ] App launch tested
- [ ] New submission tested
- [ ] Autosave tested
- [ ] Validation tested
- [ ] Email tested

### Deployment
- [ ] App shared with users
- [ ] Permissions set
- [ ] App published
- [ ] Final validation completed

**Status:** ✅ **Ready for Production** | ⚠ **Needs Attention** | ❌ **Not Complete**

---

*Generated for Cross-Divisional Project Database v2.1*
